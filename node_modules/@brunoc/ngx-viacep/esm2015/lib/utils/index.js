import { CEPError } from '../model/cep-error';
import { CEPErrorCode } from '../model/cep-error-code';
import { UFS_VALIDAS } from '../model/constantes';
import { Observable } from 'rxjs';
const throwCepError = (error) => {
    throw new CEPError(error);
};
const ɵ0 = throwCepError;
const ehStringValida = (data) => !!data && data.trim() !== '';
const ɵ1 = ehStringValida;
const hasMinLength = (data, minLength) => data.trim().length >= minLength;
const ɵ2 = hasMinLength;
const hasMaxLength = (data, maxLength) => data.trim().length <= maxLength;
const ɵ3 = hasMaxLength;
const validarMunicipio = (municipio) => {
    if (!ehStringValida(municipio)) {
        throwCepError(CEPErrorCode.MUNICIPIO_VAZIO);
    }
    if (!hasMinLength(municipio, 3)) {
        throwCepError(CEPErrorCode.MUNICIPIO_MUITO_CURTO);
    }
};
const ɵ4 = validarMunicipio;
const validarLogradouro = (logradouro) => {
    if (!ehStringValida(logradouro)) {
        throwCepError(CEPErrorCode.LOGRADOURO_VAZIO);
    }
    if (!hasMinLength(logradouro, 3)) {
        throwCepError(CEPErrorCode.LOGRADOURO_MUITO_CURTO);
    }
};
const ɵ5 = validarLogradouro;
const validarUF = (uf) => {
    if (!ehStringValida(uf)) {
        throwCepError(CEPErrorCode.UF_VAZIA);
    }
    if (!hasMinLength(uf, 2)) {
        throwCepError(CEPErrorCode.UF_MUITO_CURTA);
    }
    if (!hasMaxLength(uf, 2)) {
        throwCepError(CEPErrorCode.UF_MUITO_LONGA);
    }
    if (!UFS_VALIDAS.some((it) => it.toLowerCase() === uf.toLowerCase())) {
        throwCepError(CEPErrorCode.UF_NAO_EXISTE);
    }
};
const ɵ6 = validarUF;
export const validarCEP = () => (source) => new Observable((subscriber) => source.subscribe({
    next: (cep) => {
        try {
            const regex = new RegExp(/^[0-9]+$/);
            if (!ehStringValida(cep)) {
                throwCepError(CEPErrorCode.CEP_VAZIO);
            }
            if (!regex.test(cep)) {
                throwCepError(CEPErrorCode.CEP_INVALIDO);
            }
            if (cep.length < 8) {
                throwCepError(CEPErrorCode.CEP_MUITO_CURTO);
            }
            if (cep.length > 8) {
                throwCepError(CEPErrorCode.CEP_MUITO_LONGO);
            }
            subscriber.next(cep.trim());
        }
        catch (e) {
            subscriber.error(e);
        }
    },
    error: (error) => subscriber.error(error),
    complete: () => subscriber.complete(),
}));
export const validarEndereco = () => (source) => new Observable((subscriber) => source.subscribe({
    next: ({ uf, logradouro, municipio }) => {
        try {
            validarUF(uf);
            validarMunicipio(municipio);
            validarLogradouro(logradouro);
        }
        catch (e) {
            subscriber.error(e);
        }
        subscriber.next({ uf, logradouro, municipio });
    },
    error: (error) => subscriber.error(error),
    complete: () => subscriber.complete(),
}));
export { ɵ0, ɵ1, ɵ2, ɵ3, ɵ4, ɵ5, ɵ6 };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9icnVub2Mvbmd4LXZpYWNlcC9zcmMvbGliL3V0aWxzL2luZGV4LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxRQUFRLEVBQUUsTUFBTSxvQkFBb0IsQ0FBQztBQUM5QyxPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0seUJBQXlCLENBQUM7QUFDdkQsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQ2xELE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFFbEMsTUFBTSxhQUFhLEdBQUcsQ0FBQyxLQUFtQixFQUFFLEVBQUU7SUFDNUMsTUFBTSxJQUFJLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUM1QixDQUFDLENBQUM7O0FBRUYsTUFBTSxjQUFjLEdBQUcsQ0FBQyxJQUFZLEVBQVcsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLElBQUksSUFBSSxDQUFDLElBQUksRUFBRSxLQUFLLEVBQUUsQ0FBQzs7QUFFL0UsTUFBTSxZQUFZLEdBQUcsQ0FBQyxJQUFZLEVBQUUsU0FBaUIsRUFBVyxFQUFFLENBQ2hFLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxNQUFNLElBQUksU0FBUyxDQUFDOztBQUVsQyxNQUFNLFlBQVksR0FBRyxDQUFDLElBQVksRUFBRSxTQUFpQixFQUFXLEVBQUUsQ0FDaEUsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDLE1BQU0sSUFBSSxTQUFTLENBQUM7O0FBRWxDLE1BQU0sZ0JBQWdCLEdBQUcsQ0FBQyxTQUFpQixFQUFRLEVBQUU7SUFDbkQsSUFBSSxDQUFDLGNBQWMsQ0FBQyxTQUFTLENBQUMsRUFBRTtRQUM5QixhQUFhLENBQUMsWUFBWSxDQUFDLGVBQWUsQ0FBQyxDQUFDO0tBQzdDO0lBRUQsSUFBSSxDQUFDLFlBQVksQ0FBQyxTQUFTLEVBQUUsQ0FBQyxD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LENBQzVCLE1BQU0sQ0FBQyxTQUFTLENBQUM7SUFDZixJQUFJLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxVQUFVLEVBQUUsU0FBUyxFQUFFLEVBQUUsRUFBRTtRQUN0QyxJQUFJO1lBQ0YsU0FBUyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQ2QsZ0JBQWdCLENBQUMsU0FBUyxDQUFDLENBQUM7WUFDNUIsaUJBQWlCLENBQUMsVUFBVSxDQUFDLENBQUM7U0FDL0I7UUFBQyxPQUFPLENBQUMsRUFBRTtZQUNWLFVBQVUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FDckI7UUFDRCxVQUFVLENBQUMsSUFBSSxDQUFDLEVBQUUsRUFBRSxFQUFFLFVBQVUsRUFBRSxTQUFTLEVBQUUsQ0FBQyxDQUFDO0lBQ2pELENBQUM7SUFDRCxLQUFLLEVBQUUsQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDO0lBQ3pDLFFBQVEsRUFBRSxHQUFHLEVBQUUsQ0FBQyxVQUFVLENBQUMsUUFBUSxFQUFFO0NBQ3RDLENBQUMsQ0FDSCxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ0VQRXJyb3IgfSBmcm9tICcuLi9tb2RlbC9jZXAtZXJyb3InO1xuaW1wb3J0IHsgQ0VQRXJyb3JDb2RlIH0gZnJvbSAnLi4vbW9kZWwvY2VwLWVycm9yLWNvZGUnO1xuaW1wb3J0IHsgVUZTX1ZBTElEQVMgfSBmcm9tICcuLi9tb2RlbC9jb25zdGFudGVzJztcbmltcG9ydCB7IE9ic2VydmFibGUgfSBmcm9tICdyeGpzJztcblxuY29uc3QgdGhyb3dDZXBFcnJvciA9IChlcnJvcjogQ0VQRXJyb3JDb2RlKSA9PiB7XG4gIHRocm93IG5ldyBDRVBFcnJvcihlcnJvcik7XG59O1xuXG5jb25zdCBlaFN0cmluZ1ZhbGlkYSA9IChkYXRhOiBzdHJpbmcpOiBib29sZWFuID0+ICEhZGF0YSAmJiBkYXRhLnRyaW0oKSAhPT0gJyc7XG5cbmNvbnN0IGhhc01pbkxlbmd0aCA9IChkYXRhOiBzdHJpbmcsIG1pbkxlbmd0aDogbnVtYmVyKTogYm9vbGVhbiA9PlxuICBkYXRhLnRyaW0oKS5sZW5ndGggPj0gbWluTGVuZ3RoO1xuXG5jb25zdCBoYXNNYXhMZW5ndGggPSAoZGF0YTogc3RyaW5nLCBtYXhMZW5ndGg6IG51bWJlcik6IGJvb2xlYW4gPT5cbiAgZGF0YS50cmltKCkubGVuZ3RoIDw9IG1heExlbmd0aDtcblxuY29uc3QgdmFsaWRhck11bmljaXBpbyA9IChtdW5pY2lwaW86IHN0cmluZyk6IHZvaWQgPT4ge1xuICBpZiAoIWVoU3RyaW5nVmFsaWRhKG11bmljaXBpbykpIHtcbiAgICB0aHJvd0NlcEVycm9yKENFUEVycm9yQ29kZS5NVU5JQ0lQSU9fVkFaSU8pO1xuICB9XG5cbiAgaWYgKCFoYXNNaW5MZW5ndGgobXVuaWNpcGlvLCAzKSkge1xuICAgIHRocm93Q2VwRXJyb3IoQ0VQRXJyb3JDb2RlLk1VTklDSVBJT19NVUlUT19DVVJUTyk7XG4gIH1cbn07XG5cbmNvbnN0IHZhbGlkYXJMb2dyYWRvdXJvID0gKGxvZ3JhZG91cm86IHN0cmluZyk6IHZvaWQgPT4ge1xuICBpZiAoIWVoU3RyaW5nVmFsaWRhKGxvZ3JhZG91cm8pKSB7XG4gICAgdGhyb3dDZXBFcnJvcihDRVBFcnJvckNvZGUuTE9HUkFET1VST19WQVpJTyk7XG4gIH1cblxuICBpZiAoIWhhc01pbkxlbmd0aChsb2dyYWRvdXJvLCAzKSkge1xuICAgIHRocm93Q2VwRXJyb3IoQ0VQRXJyb3JDb2RlLkxPR1JBRE9VUk9fTVVJVE9fQ1VSVE8pO1xuICB9XG59O1xuXG5jb25zdCB2YWxpZGFyVUYgPSAodWY6IHN0cmluZyk6IHZvaWQgPT4ge1xuICBpZiAoIWVoU3RyaW5nVmFsaWRhKHVmKSkge1xuICAgIHRocm93Q2VwRXJyb3IoQ0VQRXJyb3JDb2RlLlVGX1ZBWklBKTtcbiAgfVxuXG4gIGlmICghaGFzTWluTGVuZ3RoKHVmLCAyKSkge1xuICAgIHRocm93Q2VwRXJyb3IoQ0VQRXJyb3JDb2RlLlVGX01VSVRPX0NVUlRBKTtcbiAgfVxuXG4gIGlmICghaGFzTWF4TGVuZ3RoKHVmLCAyKSkge1xuICAgIHRocm93Q2VwRXJyb3IoQ0VQRXJyb3JDb2RlLlVGX01VSVRPX0xPTkdBKTtcbiAgfVxuXG4gIGlmICghVUZTX1ZBTElEQVMuc29tZSgoaXQpID0+IGl0LnRvTG93ZXJDYXNlKCkgPT09IHVmLnRvTG93ZXJDYXNlKCkpKSB7XG4gICAgdGhyb3dDZXBFcnJvcihDRVBFcnJvckNvZGUuVUZfTkFPX0VYSVNURSk7XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCB2YWxpZGFyQ0VQID0gKCkgPT4gKFxuICBzb3VyY2U6IE9ic2VydmFibGU8c3RyaW5nPlxuKTogT2JzZXJ2YWJsZTxzdHJpbmc+ID0+XG4gIG5ldyBPYnNlcnZhYmxlKChzdWJzY3JpYmVyKSA9PlxuICAgIHNvdXJjZS5zdWJzY3JpYmUoe1xuICAgICAgbmV4dDogKGNlcCkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IHJlZ2V4ID0gbmV3IFJlZ0V4cCgvXlswLTldKyQvKTtcbiAgICAgICAgICBpZiAoIWVoU3RyaW5nVmFsaWRhKGNlcCkpIHtcbiAgICAgICAgICAgIHRocm93Q2VwRXJyb3IoQ0VQRXJyb3JDb2RlLkNFUF9WQVpJTyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICghcmVnZXgudGVzdChjZXApKSB7XG4gICAgICAgICAgICB0aHJvd0NlcEVycm9yKENFUEVycm9yQ29kZS5DRVBfSU5WQUxJRE8pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoY2VwLmxlbmd0aCA8IDgpIHtcbiAgICAgICAgICAgIHRocm93Q2VwRXJyb3IoQ0VQRXJyb3JDb2RlLkNFUF9NVUlUT19DVVJUTyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChjZXAubGVuZ3RoID4gOCkge1xuICAgICAgICAgICAgdGhyb3dDZXBFcnJvcihDRVBFcnJvckNvZGUuQ0VQX01VSVRPX0xPTkdPKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgc3Vic2NyaWJlci5uZXh0KGNlcC50cmltKCkpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgc3Vic2NyaWJlci5lcnJvcihlKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGVycm9yOiAoZXJyb3IpID0+IHN1YnNjcmliZXIuZXJyb3IoZXJyb3IpLFxuICAgICAgY29tcGxldGU6ICgpID0+IHN1YnNjcmliZXIuY29tcGxldGUoKSxcbiAgICB9KVxuICApO1xuXG5pbnRlcmZhY2UgRW5kZXJlY29QZXNxdWlzYSB7XG4gIHVmOiBzdHJpbmc7XG4gIGxvZ3JhZG91cm86IHN0cmluZztcbiAgbXVuaWNpcGlvOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBjb25zdCB2YWxpZGFyRW5kZXJlY28gPSAoKSA9PiAoXG4gIHNvdXJjZTogT2JzZXJ2YWJsZTxFbmRlcmVjb1Blc3F1aXNhPlxuKTogT2JzZXJ2YWJsZTxFbmRlcmVjb1Blc3F1aXNhPiA9PlxuICBuZXcgT2JzZXJ2YWJsZSgoc3Vic2NyaWJlcikgPT5cbiAgICBzb3VyY2Uuc3Vic2NyaWJlKHtcbiAgICAgIG5leHQ6ICh7IHVmLCBsb2dyYWRvdXJvLCBtdW5pY2lwaW8gfSkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHZhbGlkYXJVRih1Zik7XG4gICAgICAgICAgdmFsaWRhck11bmljaXBpbyhtdW5pY2lwaW8pO1xuICAgICAgICAgIHZhbGlkYXJMb2dyYWRvdXJvKGxvZ3JhZG91cm8pO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgc3Vic2NyaWJlci5lcnJvcihlKTtcbiAgICAgICAgfVxuICAgICAgICBzdWJzY3JpYmVyLm5leHQoeyB1ZiwgbG9ncmFkb3VybywgbXVuaWNpcGlvIH0pO1xuICAgICAgfSxcbiAgICAgIGVycm9yOiAoZXJyb3IpID0+IHN1YnNjcmliZXIuZXJyb3IoZXJyb3IpLFxuICAgICAgY29tcGxldGU6ICgpID0+IHN1YnNjcmliZXIuY29tcGxldGUoKSxcbiAgICB9KVxuICApO1xuIl19